<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

</head>
<!--all suggestions for the logged in user are returned in queryResults on load to be iterated through for the left column-->
<body onload="getSuggestions()">


    <!--i added this button to show how the function works to get info for a suggestion so you can display it on the right column-->
    <button onclick="getInfo(testTitle)">Click Here!</button>






    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        //i hardcoded this for the button to show how it works this var can be removed
        var testTitle = "UserID Test";

        var queryResults = "";
        var infoResults = "";


        //function to return all suggestions for the user, runs automatically on load
        function getSuggestions() {

            if (sessionStorage.user) {
                var UserID = sessionStorage.user;
            }
            else {
                UserID = "";
            }
            var webMethod = "ProjectServices.asmx/MySuggestionQuery";
            var parameters = "{\"UserID\":\"" + encodeURI(UserID) + "\"}";

            //jQuery ajax method
            $.ajax({

                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (data) {
                    suggestionList = data;
                    queryResults = JSON.parse(suggestionList.d);
                },
                error: function (e) {
                    alert("An error occured");
                }
            });

        }

        //this function returns the suggestion details in JSON, you need to pass the suggestion title in parameter
        function getInfo(Title) {


            var webMethod = "ProjectServices.asmx/GetSuggestionInfo";
            var parameters = "{\"Title\":\"" + encodeURI(Title) + "\"}";

            //jQuery ajax method
            $.ajax({

                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (data) {
                    suggestionList = data;
                    infoResults = JSON.parse(suggestionList.d);
                },
                error: function (e) {
                    alert("An error occured");
                }
            });

        }
    </script>

</body>
</html>